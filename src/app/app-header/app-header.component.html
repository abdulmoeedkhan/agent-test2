<div class="profile-detail container-fluid">
  <div class="row main-header">
    <div class="main-logo col-md-4">
      <button class="main-menu" mat-icon-button [matMenuTriggerFor]="mainMenu" aria-label="menu">
        <mat-icon>menu</mat-icon>
      </button>
      <mat-menu #mainMenu="matMenu">
        <button routerLink="/supervisor/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}"
          mat-menu-item class="main-menu-item">
          <span>Dashboard</span>
        </button>
        <button routerLink="/supervisor/announcement" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}"
          mat-menu-item class="main-menu-item">
          <span>Team Announcements </span>
        </button>
        <button routerLink="/customers/chats" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}"
          mat-menu-item class="main-menu-item">
          <span>Customer Conversation View</span>
        </button>
        <button routerLink="/customers/phonebook" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}"
          mat-menu-item class="main-menu-item">
          <span>Customer List View</span>
        </button>
        <button routerLink="/label" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}" mat-menu-item
          class="main-menu-item">
          <span>Customer Labels</span>
        </button>
      </mat-menu>

      <img src="assets/images/expertflow-logo.png">
    </div>
    <div class="col-md-8 right-profile-area">
      <div class="info">
        <!--      <div (click)="openOutboundMsgDialog()" *ngIf="config._EnableOutboundSms" class="message-trigger-area">-->
        <!--        <button mat-button class="chat-message-trigger" >-->
        <!--          <span class="material-icons">textsms</span>-->
        <!--        </button>-->
        <!--      </div>-->

        <!--      <h3 class="supervisor-heading" *ngIf="supervisor">Supervisor</h3>-->
        <div class="avatar {{_cacheService.agentPresence.state.name | lowercase}}" id="avatar">
          <mat-icon>person</mat-icon>
        </div>
        <h3 class="agent_name">
          <p [matTooltip]="_cacheService.agent.username">{{_cacheService.agent.username}}</p>
          <span>
            (Ext: {{agent.extension}})
          </span>
        </h3>

        <div class="agent-state">
          <span class="state">State</span>

          <div class="agent-current-state">
            <button mat-button [matMenuTriggerFor]="state" class="{{_cacheService.agentPresence.state.name | lowercase}}">
              <span>{{_cacheService.agentPresence.state.name | removeUnderscore }}</span>

              <i class="material-icons">
                arrow_drop_down
              </i>
            </button>

            <mat-menu class="matMenu" #state="matMenu" yPosition="below" panelClass="custom" [overlapTrigger]="false">
              <button (click)="changeState(1)" mat-menu-item class="state-trigger-main">
                <mat-icon style="color: limegreen;font-size: 18px">radio_button_checked</mat-icon>
                READY
              </button>

              <button (click)="changeState(0)" mat-menu-item class="state-trigger-main">
                <mat-icon style="color:orange; font-size: 18px" *ngIf="isConnected">radio_button_checked</mat-icon>
                NOT READY
              </button>
            </mat-menu>
          </div>

          <span class="time_state">{{display | date :"HH:mm:ss":'UTC'}}</span>

        </div>
        <!-- <div class="announcement-trigger-area" >
          <span class="notification-hint">2</span>
          <button mat-icon-button class="announcement-trigger"
                  [ngClass]="{'announcement-tab-opened': sidenav.opened}"
                  (click)="sidenav.toggle()"> <img src="assets/images/announcement.svg"></button>

        </div> -->

        <div class="multi-language">
          <button mat-button [matMenuTriggerFor]="languageSelection" class="language-trigger">
            <img src="assets/flags/{{languageFlag}}" width="20" onError="this.src='assets/flags/generic.png';">
            {{languageName}} <i class="material-icons">
              arrow_drop_down
            </i></button>

          <mat-menu #languageSelection="matMenu" yPosition="below" panelClass="custom" [overlapTrigger]="false">
            <button mat-menu-item class="language-selection" (click)="lang(language.code)"
              *ngFor="let language of languages">
              <img src="assets/flags/{{language.flag}}" width="20"
                onError="this.src='assets/flags/generic.png';">{{language.name}}
            </button>

          </mat-menu>

          <mat-menu #agentState="matMenu" yPosition="below" panelClass="custom" [overlapTrigger]="false">
            <button (click)="changeState(1)" mat-menu-item class="state-trigger">

              <mat-icon style="color: limegreen;font-size: 20px">radio_button_checked
              </mat-icon>
              READY
            </button>
            <button (click)="changeState(0)" mat-menu-item class="state-trigger">
              <mat-icon style="color:orange; font-size: 20px">
                radio_button_checked
              </mat-icon>
              NOT READY
            </button>
          </mat-menu>
        </div>

        <div class="vert-dropdown">
          <button mat-button [matMenuTriggerFor]="menu" class="vert-button">
            <div class="agent-showcase-mini">
              <mat-icon class="active">lens</mat-icon>
              <img src="assets/images/dummy-user.svg" alt="Agent">
            </div>
          </button>
          <span class="agent-time">{{display | date :"HH:mm:ss":'UTC'}}</span>

          <mat-menu class="matMenu" (click)="$event.stopPropagation()" #menu="matMenu" class="custom-user-menu"
            xPosition="after">
            <div class="menu-list-content" (click)="$event.stopPropagation()">
              <div class="main-showcase">
                <div class="agent-showcase">
                  <img src="assets/images/dummy-user.svg" alt="Agent">
                </div>
                <h4 [matTooltip]="agent.name">{{_cacheService.agent.username}}</h4>
                <span>(Ext: {{agent.extension}})</span>
              </div>

              <p class="menu-trigger-custom state-trigger">
                <span class="inner-btn">State</span>

                <!--                <button mat-menu-item class="{{_cacheService.agent.presence.agentState | lowercase}} mat-menu-item-submenu-trigger"-->
                <!--                  [matMenuTriggerFor]="agentState">-->
                <!--                  <span>{{ _cacheService.agent.presence.agentState | removeUnderscore }}</span>-->

                <!--                </button>-->
                <button mat-button [matMenuTriggerFor]="agentState" (click)="$event.stopPropagation()"
                  class="ready {{_cacheService.agentPresence.state.name | lowercase}} mat-menu-item-submenu-trigger">
                  <span>{{_cacheService.agentPresence.state.name | removeUnderscore }}</span>
                </button>
              </p>
              <p class="menu-trigger-custom logged-time ">{{display | date :"HH:mm:ss":'UTC'}}
              </p>

              <div class="mrd-states" (click)="$event.stopPropagation()">
                <span class="mrd-text">Change MRD State</span>
                <div *ngFor="let agentMrdState of _cacheService.agentPresence.agentMrdStates">
                  <p class="menu-trigger-custom select-state active">
                    <span class="inner-btn ">{{agentMrdState.mrd.name}}<small>({{agentMrdState.state.name}})</small></span>
                    <mat-slide-toggle (change)="changeMRD($event,agentMrdState)" [checked]="(agentMrdState.state.name | lowercase) == 'ready' ? true : false" color="primary"></mat-slide-toggle>
                  </p>
                </div>
              </div>

              <p class="menu-trigger-custom select-language">
                <span class="inner-btn">Selected Language</span>

                <!--                <button mat-menu-item [matMenuTriggerFor]="languageSelection" class="language-trigger">-->
                <!--                  <img src="assets/flags/{{languageFlag}}" width="20"-->
                <!--                    onError="this.src='assets/flags/generic.png';">{{languageName}} </button>-->



                <button (click)="$event.stopPropagation(); updateLanguage()" mat-button class="language-trigger">
                  <img src="assets/flags/{{languageFlag}}" width="20" onError="this.src='assets/flags/generic.png';">
                  {{languageName}} <mat-icon>keyboard_arrow_right</mat-icon>
                </button>
              </p>


              <p class="menu-trigger-custom logged-out-trigger">
                <button mat-menu-item (click)="logout()">
                  Logout
                  <mat-icon style="color: gray;font-size: 20px;">exit_to_app</mat-icon>
                </button>
              </p>


              <!-- Language list -->
              <div *ngIf="changeLanguage" class="language-change-list" (click)="$event.stopPropagation()">
                <p>Select language <mat-icon (click)="changeLanguage = false">close</mat-icon>
                </p>
                <button mat-menu-item class="language-selection"
                  [ngClass]="{'selected-language': language.code == changeLanguageCode}"
                  *ngFor="let language of languages" (click)="lang(language.code)">
                  <img src="assets/flags/{{language.flag}}" width="20"
                    onError="this.src='assets/flags/generic.png';">{{language.name}}
                </button>
              </div>

              <div *ngIf="logoutReasonList" class="language-change-list" (click)="$event.stopPropagation()">
                <p>Select language
                  <mat-icon (click)="logoutReasonList = false">close</mat-icon>
                </p>
                <span *ngFor="let reason of logoutReasons" class="logout-reason-inner">
                  <mat-checkbox color="primary" labelPosition="after">{{reason}}</mat-checkbox>
                </span>
                <button mat-button class="main-logout">Logout</button>
              </div>





            </div>
          </mat-menu>
        </div>

      </div>
    </div>
  </div>



  <mat-sidenav-container (backdropClick)="close()" hasBackdrop="true" class="right-canned-message-list announcement-tab"
    [ngClass]="{'mat-drawer-opened': sidenav?.opened}">
    <mat-sidenav #sidenav position="end" (keydown.escape)="close()" mode="over" disableClose mode="over">


      <div class="announcement-tab-header">
        <h4>Announcements</h4>
      </div>

    </mat-sidenav>

  </mat-sidenav-container>
</div>